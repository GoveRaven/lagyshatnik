<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <title>Прокрутка и операторы</title>
    <link rel="stylesheet" href="../../стили/Полигон.css" />
  </head>
  <body>
    <header>
      <img src="../../avatar/avatar1.jpg" width="90" height="90" alt="Лягушка" />
      <nav>
        <a href="../../Полигон.html">Назад</a>
        <a href="Прокрутка и операторы/Новости 3.html">Сайт</a>
      </nav>
    </header>
    <main>
      <h2>Прокрутка и операторы</h2>
      <h3>Обработчик событий onscroll</h3>
      <p>
        Главная страница новостного сайта очень длинная. Если пользователь
        прочитал все новости и хочет вернуться к началу, ему надо долго
        прокручивать страницу. Мы запрограммируем кнопку, которая прокрутит
        страницу наверх автоматически.
      </p>
      <p>
        Кнопка изначально не видна и должна появиться, если пользователь
        прокрутил страницу больше, чем на 200px. Если на кнопку нажали, страница
        должна прокрутиться к началу, а сама кнопка после этого - исчезнуть.
      </p>
      <p>
        Чтобы выполнить задание босса, нам нужно знать, когда пользователь
        прокручивает страницу. JavaScript следит за всем, что происходит в окне
        браузера, в том числе за прокурутку. Мы можем сказать ему, что делать,
        если страницу прокрутили. Для это используем обработчик событий
        <span>onscroll</span>. Он срабатывает каждый раз, когда страниицу
        прокручивают, даже если её сдвинули всего на один пиксель.
      </p>
      <p>
        Чтобы отслеживать прокрутку на новостном сайте, добавим обработчик
        событий. Окно (или вкладка) браузера в JavaScript обозначается словом
        <span>window</span>.
      </p>
      <p>Проверим, как работает обработчик событий, написав:</p>
      <code>
        window.onscroll = function () { <br />
        console.log('Страница прокручена'); <br />
        }
      </code>
      <p>
        Обработчик событий <span>onscroll</span> можно добавлять не только окну
        браузера, но и отдеьным элементам на странице. Чтобы обработчик
        сработал, у элемента должна быть своя полоса прокрутки. Управлять
        прокруткой элемента можно с помощью CSS свойства overflow
      </p>
      <h3>Свойства pageYOffset</h3>
      <p>
        Мы посмотрели, как работает обработчик событий <span>onscroll</span>. С
        его помощью мы можем отследить, когда пользователь прокручивает
        страницу. Кнопка "Наверх" должна появляться, если пользователь прокрутил
        больше 200px. Как узнать на сколько пикселей прокрутили страницу?
      </p>
      <p>
        Исползуем свойство <span>pageYOffset</span> окна браузера. Оно содержит
        число пикселей, на которое пользователь прокрутил страницу по вертикали:
      </p>
      <code>
        // Если мы на самом верху страницы <br />
        console.log(window.pageYOffset); // Вывведет: 0 <br />
        <br />
        // Прокрутим страницу на 200px <br />
        console.log(window.pageYOffset); // Выведет: 200
      </code>
      <img
        src="Прокрутка и операторы/Картинки/1.PNG"
        style="max-width: 90%; margin: 20px 0px"
      />
      <p>
        Чтобы вовремя показать кнопку "Наверх", нам нужно отслеживать величину
        вертикальной прокрутки. Посмотрим, как она изменяется. Для этого скажем
        JavaScript выводить её в консоль каждый раз, когда срабатывает событие
        <span>onscroll</span>.
      </p>
      <h3>Показываем кнопку "Наверх"</h3>
      <p>
        Мы научились узнавать величину вертикальной прокрутки. Если пользователь
        прокрутил боьше 200px,, на странице должна появиться кнопка "Наверх". В
        разметке этот элемент с классом <span>up-button</span>.
      </p>
      <p>
        Найдём кнопку с помощью метода <span>querySelector</span> и запишем её в
        переменную.
      </p>
      <p>
        Изначально кнопка не видна и должна появиться, если страница прокручена
        больше, чем на 200px. Чтобы определить, нужно ли показывать кнопку,
        добавим внутрь обработчика событий <span>onscroll</span> условную
        конструкцию и с помощью оператора сравнения "больше" сравним величину
        прокрустки с числом <span>200</span>:
      </p>
      <code>
        if (window.pageYOffset > 200) { <br />
        // Если услове истино, показываем кнопку <br />
        }
      </code>
      <p>
        Чтобы кнопка появилась, ей нужно добавить класс <span>shown</span>.
        Используем для этого метод <span>classList.add</span>. Затем прокрутим
        страницу и убедимся, что кнопка "Наверх" появляется.
      </p>
      <h3>Меод scrollTo</h3>
      <p>
        Мы сказали JavaScript показывать кнопку "Наверх", если прокручено больше
        200px. При клике на эту кнопку страница должна прокрутиться к началу.
        Пока этого не происходит. Как заставить страницу покрутиться?
      </p>
      <p>Используем метод <span>scrollTo</span>:</p>
      <code> window.scrollTo(координата-X, координата-Y); </code>
      <p>
        Координата X указывает, куда нужно прокрутить страницу по горизонтали, а
        координата Y - куда нужно прокрутить страницу по вертикали. Когда
        браузер выполнит инструкцию, указанная точка окажется в левом верхнем
        углу окна. Координаты задаются в пикселях, но указывать единыы измерения
        не нужно:
      </p>
      <code>
        // Прокрутит страницу на 100px вправо и на 50px вниз <br />
        window.scrollTo(100, 50);
      </code>
      <img src="Прокрутка и операторы/Картинки/2.PNG" />
      <p>
        Если прокрутить страницу до указанных координат не получится, браузер
        прокрутит её так далеко, как сможет, но увеличивать страницу не будет.
        Если страница помещается в окне целиком и полосы прокрутки нет, то
        браузер проигнорирует эту инструкцию.
      </p>
      <p>
        На новостном сайте, с которы мы работаем, нет горизонтальной прокрутки.
        Поэтому в координату X мы запишем <span>0</span>, а менять будет только
        координату Y.
      </p>
      <p>
        Посмотрим, как рабоатет метод <span>scrollTo</span>: скажем JavaScript
        сначала прокрутить страницу на 400ox вниз, а после вернуть её к началу.
      </p>
      <h3>Прокручиваем страницу по клику</h3>
      <p>
        Мы научились прокручивать страницу с помощью JavaScript! Нам нужно,
        чтобы страницу прокручивалась к началу, когда пользователь кликает на
        кнопку "Наверх".
      </p>
      <p>
        Кнопку мы уже нашли, теперь нужно добавить ей обработчик событий
        <span>onclick</span>. После этого перенесём инструкцию со
        <span>scrollTo</span> внутри обработчика и проверим, что при клике на
        кнопку страница прокручивается к началу.
      </p>
      <p>
        По умолчанию автоматическая прокрутка в браузерах происходит очень
        быстро, скачком. ЧЧтобы сделать её более плавной, мы используем CSS
        свойство <span>scroll-behavior</span> со значением <span>ssmooth</span>.
      </p>
      <h3>Завершаем работу над кнопкой "Наверх"</h3>
      <p>
        Мы обавли в скрипт обработчик событий <span>onlick</span> и убедились,
        что по клику на кнопку страница прокручивается к началу. Сама кнопка при
        этом не исчезает, хотя пользователь находится на самом врху страницы,
        показывать её уже не нужно.
      </p>
      <p>
        Чтобы кнопка пропала, у неё следует убрать класс <span>shown</span>.
        Делать это нужно, если виличина вертиклаьной прокрутки не больше 200px.
        У нас уже есть условная конструкция, которая провеярет величину
        прокрутки и добавляет кнопке класс, если прокручено больше 200px.
        Добавим в условную конструкцию альтернативную ветку <span>else</span>:
        если условие ложно, то используем метод <span>classList.remove</span>,
        чтобы убрать у кнопки класс <span>shown</span>
      </p>
      <h3>Начинаем создавать фильтрацию на сайте</h3>
      <p>
        На странице есть раскрывающийся список, или "селект" в котром
        перечислены категории новостей. Когда пользователь выбирает категорию из
        списка, на странице должны остаться новости только из этой категоии.
        Если выбрана опция "Все новости", то показать нужно новости из всех
        категорий.
      </p>
      <p>
        Чтобы сделать фильтрацию, мы должны найти все новости на странице и
        сравнить категорию каждой из них с выбранным значением фильтра. Если они
        совпадают или если выбрана опция "Все новости", то новость нужно
        оставить на странице. А если ктегоия новости и значения фильтра не
        совпадают, то новость спрятать.
      </p>
      <p>
        Такой способ сделать фильтрацию подходит, если значения фильтра и
        элементы, которые надо фильтровать, находятся прямо в разметке. Помните,
        что не существует универсальных решений, всё зависит от конкретной
        ситуации.
      </p>
      <p>
        Все новости на главной странице сайта имеют класс
        <span>news-block</span>. Найдём их и запишем полученную коллекцию в
        переменную. Убедимся, что нашли все новости - добавим всем элементам в
        коллекции временную подсветку и проверим, что на появиласть у каждой
        новости на странице.
      </p>
      <p>
        За подсветку отвечает класс <span>highlight</span>. Используем цикл
        <span>for of</span>, чтобы добавить его каждому элементу коллекции. В
        будущем мы используем этот класс, чтобы подсвечивать новости из разных
        категорий. Это облегчик откладку кода
      </p>
      <h3>Оператор строго равенства</h3>
      <p>
        Мы нашли все новости на странице и добавили им подсветку, которая
        поможет отладить код и настроить фильтрацию .Фильтровать новости мы
        будем по категориям. Категория каждой новости указана в её data-атрибуте
      </p>
      <p>
        Возможых значений у <span>data-category</span> четыре:
        <span>'games'</span>, <span>'IT'</span>, <span>'HR'</span>,
        <span>'cats'</span>. Такие же значения есть у фильтра. Когда
        пользователь выбирает категорию, мы должны сравнивать значения атрибута
        новости с выбранным значением фильтра.
      </p>
      <p>
        Мы уже умеем сравнивать два числа и узнавать, какое из них больше. А как
        узнать, что два значения равны друг другу? Исползуем оператор строго
        равенства. Он обозначается тремя знаками равно:
      </p>
      <code>
        'a' === 'a'; // Результат: true <br />
        'b' === 'b'; // Результат: false
      </code>
      <p>
        Оператор строго равенства сравнивает два значения и возвращает
        <span>true</span>, если ни равны, и <span>false</span>, если они не
        равны. Значения, которые проверяют оператор, называют операндами.
      </p>
      <p>
        Используем оператор строго равенства, чтобы создать фильтрацию на
        новостном сайте. Добавим внутрь цикал услонвую конструкцию и будем
        сранивать значения атрибута <span>data-category</span> каждой новости с
        одним из возможных значений фильтра. В результате подсветка добавится
        новостям только из одной категории.
      </p>
      <h3>Обработчик событий onchange</h3>
      <p>
        Мы научились добавлять класс новостям только из одной категории. Для
        этого мы сравнили значение data-атрибута каждой новости со строкой,
        которую прописали вручную. Но нам нужно сравнивать его с категорией,
        которую пользователь выбрал в фильтре. Тогда фильтрация будет
        происходить автоматически.
      </p>
      <p>
        Фильтр на главной странице - это выпадающий список с категориями
        новостей.
      </p>
      <p>
        Пользователь может выбрать одну из предложенных категорий. Выбранное
        значение хранится в свойстве <span>value</span> самого списка.
      </p>
      <code>
        // Находим выпадающий список <br />
        let select = document.querySelector('select') <br />
        <br />
        // Выводим значение в консоль <br />
        console.log(select.value);
      </code>
      <p>
        Нам нужно получать значение фильтра, когда пользователь выбирает новую
        категорию. Для этого используем обработчик событий
        <span>onchange</span>. Этот обработчик срабатывает, когда пользователь
        выбирает новое значение из выпадающего списка.
      </p>
      <code>
        // Добавляем обработчик событий <br />
        select.onchange = function () { <br />
        //Выводим в консоль нвоое значение <br />
        console.log(select.value); <br />
        }
      </code>
      <p>
        В новостном сайте филтр - это элемент с классом <span>filter</span>.
        Найдём его, сохраним в переменную и добавим обработчик событий
        <span>onchange</span>. После этого скажем JavaScript выводить значение
        фильтра в консоль и по очереди выберем несколько категорий из списка.
      </p>
      <h3>Добавляем класс новостям из выбранной категории.</h3>
      <p>
        Мы научились получать значение фильтра в тот момент, когда пользователь
        переключает категорию. Чтобы фильтрация заработала, нам нужно сравнивать
        полученное значение с категорией каждой новости на странице.
      </p>
      <p>
        У нас уже написан цикл, который перебирает все новости и сравнивает
        категорию каждой из них со строкой. Перенесём этот внутрь обработчика
        событий <span>onchange</span> и замеим произвольную строку на значение
        фильтра.
      </p>
      <code>
        // До <br />
        for (let newsBlock of newsBlocks) { <br />
        if (newsBlock.dataset.category === "cats") { <br />
        newsBlock.classList.add("highlight"); <br />
        } <br />
        } <br />
        <br />
        // После <br />
        filter.onchange = function () { <br />
        for (let newsBlock of newsBlocks) { <br />
        if (newsBlock.dataset.category === "cats") { <br />
        newsBlock.classList.add("highlight"); <br />
        } <br />
        } <br />
        }; <br />
      </code>
      <h3>Оператр строго неравенства</h3>
      <p>
        Теперь подсветка добавляется новостям из той категории, которая выбрана
        в фильтре. Когда ползователь выбирает категоию из списка, новости из
        выбранной категории должны остаться на странице, а новости из всех
        других категорий изчезнуть.
      </p>
      <p>
        Чтобы новость со страницы пропала, ей нужно добавить класс
        <span>hidden</span>. Сейчас мы добавляем класс, отвечающий за подсветку,
        тем новостям, чьи категории совпадают со значением фильтра. А как
        сделать наоборот - добавить класс, чьи категории отличаются? Используем
        оператор строгого <b>не</b>равенства. Он обозначается воклицательным
        знаком и двумя знаками равенства:
      </p>
      <code>
        'a' !== 'a'; // Результат: false <br />
        'a' !== 'b'; // Результат: true
      </code>
      <p>
        Оператор строгого неравенства работает противоположно оператору строго
        равенства. Если значение равны, он вернёт <span>false</span>, а если не
        равны, то <span>true</span>.
      </p>
      <p>
        Продолжаем создавать фильтрацию на новостном сайте. Изменим условие
        конструкции <span>if</span>, чтобы цветная обводка добавлялась нвоостям
        из всех катгорий, кроме выбранной. Потом заменим класс
        <span>highlight</span>, отвечающий за обводку, на класс
        <span>hidden</span>. Этот класс спрячет лишние новости. После этого
        проверим, что новости из невыбранных категорий действительно скрываются.
      </p>
      <h3>Показываем новости из выбранной категории</h3>
      <p>
        У нас получилось спрятать те новости, категория которых не совпадает со
        значением фильтра. Но есть проблема: если переключить фильтр несколько
        раз, то со страницы пропадут вообще все новости. Почему так происходит?
      </p>
      <p>
        Дело в том, что мы сказали JavaScript, когда добавлят класс
        <span>hidden</span>, но не сказали, когда его убирать. Если значние
        фильтра зменилос, одни новости должны скрываться, а другие - снова
        показываться. Но пока мы новости только прячем.
      </p>
      <p>
        Сделаем так, чтобы те новости, чья категория совпадает с новым значением
        фильтра, возвращались на страницу. Добавим в условную конструкцию ветку
        <span>else</span>: если условие ложно, то есть категория новости равна
        значению фильтра, то класс <span>hidden</span> у неё следует убрать.
        После этого несколько раз переключим фильтр и убедимся, что проблема
        исчезла
      </p>
      <h3>Оператор логическое И</h3>
      <p>
        Фильтрация на новостном сайте практически готова: когда пользователь
        выбирает категорию из списка, на странице остаются новости только из
        этой категории. Но если выбрать опцию "Все новости", то не остаётся ни
        одной.
      </p>
      <p>
        Разберём, почему так происходит. Каждой категории новостей соответствует
        такое же значение фильтра. Но категорий всего четыре, а возможных
        значений фильтра - пять. Если выбрана опция "Все новости", то значение
        фильтра становится <span>'all'</span>. На странице нет новостей с таким
        значение атрибута <span>data-category</span>, поэтом проверка на
        неравенство всегда возвращает <span>true</span>. В результе всем
        новостям добавляется класс <span>hidden</span>, и они пропадают со
        страницы.
      </p>
      <p>
        Как сказать JavaScript, что если выбрана опция "Все новости", то новости
        прятать не нужно? Добавим конструкцию <span>if</span> ещё одно условие:
        зачение фильтра не должно быть равно <span>'all'</span>.
      </p>
      <code>
        // Если категория НЕ равна филтру И фильтр НЕ равен "Все новости" <br />
        if (newsBlock.dataset.category !== filter.value && filter.value !==
        'all') { <br />
        newsBlock.classList.add("hidden"); <br />
        }
      </code>
      <p>
        Двойным амперсандом <span>&&</span> в JavaScript обозначается оператор
        <b>логическое И</b>. Он позволяет объединить две части условия.
      </p>
      <p>
        Посмотрим, как работает. Операторы строгого неравенства в нашем условии
        сравнивают значения и возвращают <span>true</span> или
        <span>false</span>. Если хоть один из операторов вернёт
        <span>false</span>, то благодаря логическому И условие целиком также
        будет считаться ложным:
      </p>
      <code>
        true && true; // Результат: true <br />
        true && false; // Результат: false <br />
        false && true; // Результат: false <br />
        false && false; // Результат: false <br />
      </code>
      <p>
        В результате класс <span>hidden</span> добавится новости, только если
        обе проверки на неравнство вернут <span>true</span>.
      </p>
      <p>
        Доработаем нашу фильтрацию. Добавим в условие проверку, что значение
        фильтра строго не равно 'all', и используем логическое И, чтобы
        объединить две части условия. После этого убедимся, что вс1 работаем
        правилно
      </p>
    </main>
    <footer>
      <h3>Здесь могла быть ваша кувшинка</h3>
    </footer>
  </body>
</html>
